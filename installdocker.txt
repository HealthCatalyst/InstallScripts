#!/bin/sh
set -e
#
# This script is meant for quick & easy install via:
#   'curl -sSL https://imranq2.github.io/InstallScripts/installdocker.txt | sh'
# or:
#   'wget -qO- https://imranq2.github.io/InstallScripts/installdocker.txt | sh'
#
#

u="$(whoami)"
echo "User name: $u"

# shell syntax: http://linuxcommand.org/wss0090.php
# echo "installing sudo if it doesn't exist"
# yum install sudo -y

echo "updating yum package manager"
sudo yum update -y

echo "downloading and installing docker"
curl -fsSL https://get.docker.com/ | sh

if [ $u != "root" ]; then
    echo "giving permission to $u"
    sudo usermod -aG docker $u
    echo "Logout and Login and run: curl -sSL https://imranq2.github.io/InstallScripts/setupdocker.txt | sh"
    echo 0
fi

echo "Setting up docker"
curl -sSL https://imranq2.github.io/InstallScripts/setupdocker.txt | sh
