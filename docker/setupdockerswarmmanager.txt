#!/bin/sh
set -e

echo "Version 1.01"

#
# This script is meant for quick & easy install via:
#   'curl -sSL https://healthcatalyst.github.io/InstallScripts/docker/setupdockerswarmmanager.txt | sh -s <IP of this manager node>'


curl -L https://github.com/docker/machine/releases/download/v0.12.2/docker-machine-`uname -s`-`uname -m` >/tmp/docker-machine &&
chmod +x /tmp/docker-machine &&
sudo cp /tmp/docker-machine /usr/local/bin/docker-machine

curl -L https://healthcatalyst.github.io/InstallScripts/docker/swarm_bash.txt >/tmp/swarm_bash.sh \
    && chmod +x /tmp/swarm_bash.sh \
    && sudo cp /tmp/swarm_bash.sh /usr/local/bin/swarm_bash.sh

docker swarm init --advertise-addr $1

